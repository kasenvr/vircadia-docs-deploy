

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>&lt;no title&gt; &mdash; Vircadia Documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon-256.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="&lt;no title&gt;" href="client-entity-scripts.html" />
    <link rel="prev" title="&lt;no title&gt;" href="assignment-client-scripts.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="https://projectathena.io/">
          

          
            
            <img src="../_static/vircadia-logo-1880.png" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search Vircadia Docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
<p style="margin-bottom: 10px; margin-top: 10px;"><a href="https://apidocs.vircadia.dev">Looking for <strong>API Reference</strong><br />Documentation?</a></p>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../home.html">HOME</a></li>
<li class="toctree-l1"><a class="reference internal" href="../explore.html">EXPLORE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../create.html">CREATE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../script.html">SCRIPT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../host.html">HOST</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribute.html">CONTRIBUTE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer.html">DEVELOPER</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes.html">RELEASE NOTES</a></li>
<li class="toctree-l1"><a class="reference external" href="https://apidocs.vircadia.dev">API REFERENCE</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Vircadia Docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          






















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    You are here: 
      <li><a href="../index.html"><i class="fa fa-home"></i></a> &raquo;</li>
        
          <li><a href="../script.html">Script</a> &raquo;</li>
        
      <li>&lt;no title&gt;</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/kasenvr/athena-docs-sphinx/blob/master/docs/source/script/avatar-scripts.md" class="fa fa-github"></a><a href="https://github.com/kasenvr/athena-docs-sphinx/blob/master/docs/source/script/avatar-scripts.md"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <p># Avatar Scripts</p>
<p>Avatar scripts are bound to an avatar. This means that they run when a user puts on a specific avatar. Likewise, avatar scripts stop running when the avatar is removed or changed. Other users in the domain will be able to see the script in action, but they will not be able to run the script themselves.</p>
<p>With avatar scripts, you can do things like make your hair flow or create particle clouds around your avatar.</p>
<p><strong>On This Page</strong></p>
<ul class="simple">
<li><p>[Add an Avatar Script](#add-an-avatar-script)</p></li>
<li><p>[Example of an Avatar Script](#example-of-an-avatar-script)</p></li>
</ul>
<p>## Add an Avatar Script
There are two different ways you can add an avatar script to your FST file: either by using our Package Model tool or by manually adding the script.</p>
<dl class="simple">
<dt>&lt;div class=”admonition note”&gt;</dt><dd><p>&lt;p class=”admonition-title”&gt;Note&lt;/p&gt;
&lt;p&gt;You cannot add scripts to avatars you have purchased from the Marketplace. You can add scripts to custom avatars only. &lt;/p&gt;</p>
</dd>
</dl>
<p>&lt;/div&gt;</p>
<p>To add an avatar script using the Package Model tools:
1. Create a folder called <cite>scripts</cite> in the same location as your FBX file.
2. Copy your avatar script into this new folder.
3. In Interface, go to <strong>Edit &gt; Package Model as .fst</strong>
4. For ‘Script Directory’, enter the path to the <cite>scripts</cite> folder you created above.</p>
<p>To add an avatar script manually:
1. Open the FST file for your avatar in the text editor of your choice.
2. Add a line telling the avatar where to find the script file using the syntax <cite>script = [SCRIPT URL]</cite>.![](_images/add-script.png)</p>
<p>You can add multiple scripts to your avatar by adding multiple <cite>script = url</cite> lines.</p>
<p>## Example of an Avatar Script</p>
<p>The following script makes your avatar throw balls when its right hand moves.</p>
<p><a href="#id1"><span class="problematic" id="id2">``</span></a><a href="#id3"><span class="problematic" id="id4">`</span></a>javascript
function(){</p>
<blockquote>
<div><p>var triggerDistance = 0.0;
var TRIGGER_THRESHOLD = 0.9;
var LOAD_THRESHOLD = 0.6
var init = false;
var rightHandIndex = MyAvatar.getJointIndex(“RightHand”);
var rightArmIndex = MyAvatar.getJointIndex(“RightArm”);
var distance = 0.0;
var triggered = false;
function fireBall(position, speed) {</p>
<blockquote>
<div><dl class="simple">
<dt>var baseID = Entities.addEntity({</dt><dd><p>type: “Sphere”,
color: { blue: 128, green: 128, red: 20 },
dimensions: { x: 0.1, y: 0.1, z: 0.1 },
position: position,
dynamic: true,
collisionless: false,
lifetime: 10,
gravity: speed,
userData: “{ “grabbableKey”: { “grabbable”: true, “kinematic”: false } }”</p>
</dd>
</dl>
<p>});
Entities.editEntity(baseID, { velocity: speed });</p>
</div></blockquote>
<p>}
Script.update.connect(function() {</p>
<blockquote>
<div><p>rightHandPos = MyAvatar.getJointPosition(rightHandIndex);
rightArmPos = MyAvatar.getJointPosition(rightArmIndex);
fireDir = Vec3.subtract(rightHandPos, rightArmPos);
var distance = Vec3.length(fireDir);
triggerDistance = distance &gt; triggerDistance ? distance : triggerDistance;
if (!triggered) {</p>
<blockquote>
<div><dl class="simple">
<dt>if (distance &lt; LOAD_THRESHOLD * triggerDistance) {</dt><dd><p>triggered = true;</p>
</dd>
</dl>
<p>}</p>
</div></blockquote>
<dl class="simple">
<dt>} else if (distance &gt; TRIGGER_THRESHOLD * triggerDistance) {</dt><dd><p>triggered = false;
fireBall(rightHandPos, Vec3.normalize(fireDir));</p>
</dd>
</dl>
<p>}</p>
</div></blockquote>
<p>});
MyAvatar.scaleChanged.connect(function () {</p>
<blockquote>
<div><p>triggerDistance = 0.0;</p>
</div></blockquote>
<p>});</p>
</div></blockquote>
<p>})()
<a href="#id5"><span class="problematic" id="id6">``</span></a><a href="#id7"><span class="problematic" id="id8">`</span></a></p>
<p>This example script uses the [MyAvatar](<a class="reference external" href="https://apidocs.vircadia.dev/MyAvatar.html">https://apidocs.vircadia.dev/MyAvatar.html</a>) namespace to determine if your avatar’s hand moves. Upon detecting movement, the script makes your avatar launch balls. It also uses some other namespaces such as [Entities](<a class="reference external" href="https://apidocs.vircadia.dev/Entities.html">https://apidocs.vircadia.dev/Entities.html</a>) (to create the ball you will launch) and [Vec3](<a class="reference external" href="https://apidocs.vircadia.dev/Vec3.html">https://apidocs.vircadia.dev/Vec3.html</a>) (to determine the right positions and distances). Add it to your avatar to see how it works.</p>
<p><strong>See Also</strong></p>
<ul class="simple">
<li><p>[Get Started with Scripting](get-started-with-scripting.html)</p></li>
<li><p>[Write Your Own Scripts](write-scripts.html)</p></li>
<li><p>[API Reference](<a class="reference external" href="https://apidocs.vircadia.dev">https://apidocs.vircadia.dev</a>)</p></li>
</ul>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="client-entity-scripts.html" class="btn btn-neutral float-right" title="&lt;no title&gt;" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="assignment-client-scripts.html" class="btn btn-neutral float-left" title="&lt;no title&gt;" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, High Fidelity. © Copyright 2020, Vircadia.

    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  

   

</body>
</html>